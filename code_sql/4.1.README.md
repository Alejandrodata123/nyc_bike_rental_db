# NYC CityBike Business Insights: SQL Query Reference

This document provides an overview of the business insights that can be derived from the NYC CityBike database using SQL queries. The queries are organized by category to address key business questions and support data-driven decision making.

## Database Structure Overview

The NYC CityBike database consists of three main tables:

1. **station_data**: Contains information about bike stations including location and capacity
2. **bike_trips_data**: Contains trip data with station names and coordinates
3. **trips_time_etc**: Contains trip duration, user type, gender, and birth year information

## Business Insight Categories

The SQL queries are organized into the following categories:

1. **Usage Patterns**: Understand when and how the bike system is used
2. **User Demographics**: Analyze user characteristics and behavior
3. **Trip Analysis**: Examine trip patterns and popular routes
4. **Station Analysis**: Evaluate station performance and capacity
5. **Operational Insights**: Assess system efficiency and balance
6. **Geospatial Analysis**: Explore geographical patterns and distributions

## Key Business Questions Addressed

### Usage Patterns
- What are the peak usage hours during the day?
- How does usage differ between weekdays and weekends?
- What are the seasonal usage patterns?
- How has bike usage grown over time?

### User Demographics
- What is the distribution of user types (Subscriber vs Customer)?
- How do user demographics vary by gender and user type?
- What is the age distribution of users?
- How many trips do customers typically take?

### Trip Analysis
- What is the average trip duration for different user types?
- What are the most popular routes between stations?
- What are the longest and shortest popular routes?
- Which bikes are used most frequently?

### Station Analysis
- Which stations have the highest usage?
- Which stations frequently exceed their capacity?
- Which stations have the most connections to other stations?
- Which stations are popular among different user types?

### Operational Insights
- What is the average number of trips per bike?
- Which stations have the most imbalanced traffic?
- Which stations have the highest usage during peak hours?

### Geospatial Analysis
- How are stations distributed geographically?
- What is the average trip distance from each station?
- What stations have the highest usage density?

## How to Use These Queries

1. **Open the SQL file**: The comprehensive SQL queries are available in `code_sql/4.3.comprehensive_business_insights.sql`
2. **Connect to your database**: Use a database client like pgAdmin, DBeaver, or the command line to connect to your PostgreSQL database
3. **Run the queries**: Execute the queries in the order they appear, or select specific queries based on your analysis needs
4. **Analyze the results**: Use the query results to identify trends, patterns, and areas for improvement
5. **Visualize the data**: For better insights, consider visualizing the query results using tools like Tableau, Power BI, or Python's matplotlib/seaborn

## Example Analysis Workflow

1. **Start with usage patterns**: Understand when the system is most used
   - Run queries 1.1-1.4 to identify peak usage times and trends
2. **Analyze user demographics**: Understand who is using the system
   - Run queries 2.1-2.4 to get insights into user types and characteristics
3. **Examine trip patterns**: Identify popular routes and trip durations
   - Run queries 3.1-3.4 to understand how the system is being used
4. **Evaluate station performance**: Identify high-demand stations
   - Run queries 4.1-4.4 to assess station usage and capacity
5. **Assess operational efficiency**: Identify potential bottlenecks
   - Run queries 5.1-5.3 to evaluate system balance and efficiency

## Next Steps

After running these queries and analyzing the results, consider:

1. **Capacity planning**: Adjust station capacities based on usage patterns
2. **Staffing optimization**: Schedule staff during peak usage hours
3. **Marketing strategies**: Target specific user demographics
4. **Route optimization**: Improve popular routes based on usage data
5. **Expansion planning**: Identify areas for new station deployment

## Visualizations

The following visualizations have been created to help understand the data:

### PNG Graphics

1. **Popular Stations**: Shows the most frequently used bike stations
   ![Popular Stations](popular_stations.png)

2. **Station Capacity Usage**: Displays station capacity utilization patterns
   ![Station Capacity Usage](station_capacity_usage.png)

3. **Trip Duration Statistics**: Illustrates the distribution of trip durations
   ![Trip Duration Statistics](trip_duration_stats.png)

### Interactive HTML Visualization

An interactive visualization of monthly bike usage patterns is available:

**Monthly Usage Visualization**: [View the interactive chart](4.1.1.7th_query_query_monthly_usage_visualization.html)

This HTML file provides an interactive way to explore monthly bike usage trends across different years.

- Some queries use Common Table Expressions (CTEs) for better readability
- Date functions like `EXTRACT()` are used to analyze temporal patterns
- Geospatial calculations use basic Euclidean distance (for simplicity)
- For production use, consider adding proper indexing to improve query performance

## Contact Information

For questions or additional analysis, please contact:
Lopez Alejandro
boixperezjuan@gmail.com


